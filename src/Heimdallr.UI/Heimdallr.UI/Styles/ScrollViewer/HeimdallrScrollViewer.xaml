<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ctrls="clr-namespace:Heimdallr.UI.Controls"
                    xmlns:cnvts="clr-namespace:Heimdallr.UI.Converters">

  <cnvts:ScrollViewerCornerVisibilityConverter x:Key="ScrollViewerCornerVisibilityConverter" />

  <Style TargetType="{x:Type ctrls:HeimdallrScrollViewer}" BasedOn="{StaticResource {x:Type ScrollViewer}}" >
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="Padding" Value="0"/>
    <Setter Property="Focusable" Value="False"/>
    
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ctrls:HeimdallrScrollViewer}">
          <Grid Background="{TemplateBinding Background}"
                SnapsToDevicePixels="True" >
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
              <RowDefinition Height="*" />
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

             <!--컨텐츠 영역--> 
            <ScrollContentPresenter x:Name="PART_ScrollContentPresenter"
                                    Grid.Row="0" 
                                    Grid.Column="0"
                                    Margin="{TemplateBinding Padding}"
                                    Content="{TemplateBinding Content}"
                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                    CanContentScroll="{TemplateBinding CanContentScroll}"
                                    ScrollViewer.IsDeferredScrollingEnabled="{Binding Path=(ScrollViewer.IsDeferredScrollingEnabled),
                                                     RelativeSource={RelativeSource TemplatedParent}}"
                                    KeyboardNavigation.DirectionalNavigation="Local" />

             <!--Horizontal ScrollBar--> 
            <ctrls:HeimdallrScrollBar x:Name="PART_HorizontalScrollBar"
                                      Orientation="Horizontal"
                                      Grid.Row="1" 
                                      Grid.Column="0"
                                      Maximum="{TemplateBinding ScrollableWidth}"
                                      ViewportSize="{TemplateBinding ViewportWidth}"
                                      Value="{TemplateBinding HorizontalOffset}"
                                      Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" />

             <!--Vertical ScrollBar-->
            <ctrls:HeimdallrScrollBar x:Name="PART_VerticalScrollBar"
                                      Orientation="Vertical"
                                      Grid.Row="0" 
                                      Grid.Column="1"
                                      Maximum="{TemplateBinding ScrollableHeight}"
                                      ViewportSize="{TemplateBinding ViewportHeight}"
                                      Value="{TemplateBinding VerticalOffset}"
                                      Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" />

            <Border Grid.Row="1"
                    Grid.Column="1"
                    Background="{TemplateBinding Background}">
              <Border.Visibility>
                <MultiBinding Converter="{StaticResource ScrollViewerCornerVisibilityConverter}">
                  <!-- ★ 수정 ③ : Corner Visibility 계약 -->
                  <Binding Path="ComputedVerticalScrollBarVisibility"
                           RelativeSource="{RelativeSource TemplatedParent}" />
                  <Binding Path="ComputedHorizontalScrollBarVisibility"
                           RelativeSource="{RelativeSource TemplatedParent}" />
                </MultiBinding>
              </Border.Visibility>
            </Border>

          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

</ResourceDictionary>