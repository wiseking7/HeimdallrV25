<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ctrls="clr-namespace:Heimdallr.UI.Controls">

  <Style TargetType="{x:Type ctrls:HeimdallrIcon}">
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ctrls:HeimdallrIcon}">
          <Grid Background="{TemplateBinding Background}" >

            <!-- Path용 Viewbox -->
            <Viewbox x:Name="viewbox" 
                     Visibility="Collapsed"
                     Width="{TemplateBinding IconSize}"
                     Height="{TemplateBinding IconSize}"
                     Margin="2"
                     Stretch="{TemplateBinding Stretch}" 
                     StretchDirection="Both">
              <Path  Data="{TemplateBinding Data}"
                     Fill="{Binding Fill, RelativeSource={RelativeSource TemplatedParent}}"
                     HorizontalAlignment="Center" 
                     VerticalAlignment="Center" />
            </Viewbox>

            <!-- Image용 Viewbox -->
            <Viewbox x:Name="imageViewbox"
                     Visibility="Collapsed"
                     Width="{TemplateBinding IconSize}"
                     Height="{TemplateBinding IconSize}"
                     Margin="2"
                     Stretch="{TemplateBinding Stretch}"
                     StretchDirection="Both">
              <Image x:Name="image"
                     Source="{TemplateBinding Source}" 
                     HorizontalAlignment="Center"
                     VerticalAlignment="Center"
                     RenderOptions.BitmapScalingMode="HighQuality"
                     SnapsToDevicePixels="True"
                     UseLayoutRounding="True" />
            </Viewbox>
          </Grid>
          <ControlTemplate.Triggers>
            <Trigger Property="Mode" Value="Icon">
              <Setter TargetName="viewbox" Property="Visibility" Value="Visible" />
              <Setter TargetName="imageViewbox" Property="Visibility" Value="Collapsed" />
            </Trigger>
            <Trigger Property="Mode" Value="Image">
              <Setter TargetName="imageViewbox" Property="Visibility" Value="Visible" />
              <Setter TargetName="viewbox" Property="Visibility" Value="Collapsed" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>