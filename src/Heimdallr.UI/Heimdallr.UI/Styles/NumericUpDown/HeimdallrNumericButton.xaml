<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ctrls="clr-namespace:Heimdallr.UI.Controls">

  <!-- 아이콘만 표시되는 버튼 템플릿 -->
  <ControlTemplate x:Key="IconOnlyButtonTemplate" TargetType="{x:Type ctrls:HeimdallrRepeatButton}">
    <ContentPresenter 
       HorizontalAlignment="Center"
       VerticalAlignment="Center"
       RecognizesAccessKey="True"/>
  </ControlTemplate>

  <Style TargetType="{x:Type ctrls:HeimdallrNumericButton}">
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="Focusable" Value="True"/>
    <Setter Property="Foreground" Value="#FF222831" />
    <Setter Property="Background" Value="#FFDCD7C9" />
    <Setter Property="BorderBrush" Value="#FFCCCCCC"/>
    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="FontSize" Value="20" />
    <Setter Property="MinWidth" Value="120"/>
    <Setter Property="Height" Value="35"/>

    <Setter Property="IconSize" Value="30" />

    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ctrls:HeimdallrNumericButton}">

          <Border 
               x:Name="border"
               BorderBrush="{TemplateBinding BorderBrush}"
               BorderThickness="{TemplateBinding BorderThickness}"
               CornerRadius="5"
               Background="{TemplateBinding Background}"
               SnapsToDevicePixels="True"
               UseLayoutRounding="True"
               Padding="2">
            <Grid>
              <Grid.ColumnDefinitions>
                <!-- 왼쪽 Down 버튼 -->
                <ColumnDefinition Width="Auto"/>
                <!-- 중앙 숫자 -->
                <ColumnDefinition Width="*"/>
                <!-- 오른쪽 Up 버튼 -->
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>

              <!-- Down 버튼 (왼쪽) -->
              <ctrls:HeimdallrRepeatButton x:Name="PART_DownButton"
                                          Grid.Column="0"
                                          Focusable="False"
                                          Width="{TemplateBinding IconSize}" 
                                          Height="{TemplateBinding IconSize}"
                                          Background="Transparent"
                                          BorderThickness="0"
                                          Padding="2"
                                          ToolTip="DOWN"
                                          Icon="{TemplateBinding DownButtonIcon}"
                                          IconFill="{TemplateBinding DownIconFill}"
                                          MouserOverIconFill="{TemplateBinding DownIconMouseOverFill}" />

              <!-- TextBox (중앙) -->
              <TextBox x:Name="PART_TextBox"
                       Grid.Column="1"
                       Background="{TemplateBinding Background}"
                       BorderThickness ="{TemplateBinding BorderThickness}"
                       BorderBrush="{TemplateBinding BorderBrush}"
                       Margin="0 0 5 0"  
                       FontWeight="Medium"
                       FontSize="{TemplateBinding FontSize}"
                       VerticalContentAlignment="Center"
                       HorizontalContentAlignment="Center"
                       Padding="2"
                       IsEnabled="False"
                       Text="{Binding Value, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"
                       Foreground="{TemplateBinding Foreground}">
              </TextBox>

              <!-- Up 버튼 -->
              <ctrls:HeimdallrRepeatButton x:Name="PART_UpButton"
                                           Grid.Column="2"
                                           Focusable="False"
                                           Width="{TemplateBinding IconSize}" 
                                           Height="{TemplateBinding IconSize}"
                                           Background="Transparent"
                                           BorderThickness="0"
                                           Padding="2"
                                           ToolTip="UP"
                                           Icon="{TemplateBinding UpButtonIcon}"
                                           IconFill="{TemplateBinding UpIconFill}"
                                           MouserOverIconFill="{TemplateBinding UpIconMouseOverFill}" />
            </Grid>
          </Border>
          <ControlTemplate.Triggers>
            <!-- 비활성화 상태 -->
            <Trigger Property="IsEnabled" Value="False">
              <Setter TargetName="PART_TextBox" Property="Foreground" Value="Gray"/>
              <Setter TargetName="PART_UpButton" Property="IconFill" Value="Gray"/>
              <Setter TargetName="PART_DownButton" Property="IconFill" Value="Gray"/>
            </Trigger>

            <Trigger Property="IsMouseOver" Value="True">
              <Setter TargetName="PART_TextBox" Property="Foreground" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Foreground}" />
              <Setter TargetName="PART_UpButton" Property="IconFill" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=UpIconPressedFill}" />
              <Setter TargetName="PART_DownButton" Property="IconFill" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=DownIconPressedFill}" />
            </Trigger>

            <!-- PressedUp 상태 -->
            <Trigger  SourceName="PART_UpButton" Property="IsPressed" Value="True">
              <Setter TargetName="PART_UpButton" Property="IconFill"
                     Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=UpIconPressedFill}" />
            </Trigger>

            <!-- PressedDown 상태 -->
            <Trigger  SourceName="PART_DownButton" Property="IsPressed" Value="True">
              <Setter TargetName="PART_DownButton" Property="IconFill"
                     Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=DownIconPressedFill}" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>