<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ctrls="clr-namespace:Heimdallr.UI.Controls">

  <Style TargetType="{x:Type ctrls:HeimdallrHoldIconButton}" BasedOn="{StaticResource {x:Type Button}}">
    <Setter Property="Cursor" Value="Hand"/>
    
    <!-- 기본 커스텀 속성-->
    <Setter Property="Width" Value="120" />
    <Setter Property="Height" Value="40" />
    <Setter Property="FontSize" Value="16" />
    <Setter Property="CornerRadius" Value="7" />
    <Setter Property="HoldDuration" Value="0:0:0.5" />
    <Setter Property="IconFill" Value="#FFFFFFFF" />
    <Setter Property="BackgroundRectangleFill" Value="#FF1E3E62" />
    <Setter Property="MouseOverBackground" Value="#FFEBD5AB" />
    <Setter Property="PressedBackground" Value="#FF5C3E94" />
    <Setter Property="KeyboardFocusBorderBrush" Value="#FFE0D9D9" />
    <Setter Property="KeyboardFocusBorderThickness" Value="2" />
    <Setter Property="OneHoldFill" Value="#FFC62300" />
    <Setter Property="TwoHoldFill" Value="#FFF2F7A1" />
    <Setter Property="ThreeHoldFill" Value="#FF6D67E4" />

    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ctrls:HeimdallrHoldIconButton}">
          <Grid>
            <!-- 기본 배경 -->
            <Border x:Name="BaseRect"
                    Width="{TemplateBinding Width}"
                    Height="{TemplateBinding Height}"
                    CornerRadius="{TemplateBinding CornerRadius}"
                    Background="{TemplateBinding Background}"
                    BorderThickness="0"
                    Panel.ZIndex="2"/>

            <!-- 배경 확대용 -->
            <Border x:Name="BgRect"
                    Width="{TemplateBinding Width}"
                    Height="{TemplateBinding Height}"
                    CornerRadius="{TemplateBinding CornerRadius}"
                    Background="{TemplateBinding BackgroundRectangleFill}"
                    Panel.ZIndex="3"/>

            <!-- Hold 진행용 -->
            <Border x:Name="HoldRect"
                    Width="0"
                    Height="0"
                    CornerRadius="{TemplateBinding CornerRadius}"
                    Background="{TemplateBinding OneHoldFill}"
                    Panel.ZIndex="4"/>

            <!-- 아이콘 + Content + 텍스트  -->
            <Grid Margin="3" Panel.ZIndex="5" VerticalAlignment="Center">
              <Grid.ColumnDefinitions>
                <!-- 아이콘 -->
                <ColumnDefinition Width="Auto"/>
                <!-- ButtonText -->
                <ColumnDefinition Width="*"/>
                <!-- ContentPresenter -->
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>

              <!-- 아이콘 -->
              <Viewbox Grid.Column="0"
                       Width="{TemplateBinding IconSize}" 
                       Height="{TemplateBinding IconSize}" 
                       Stretch="Uniform" >
                <ctrls:HeimdallrIcon x:Name="IconElement"
                                     VerticalAlignment="Center"
                                     HorizontalAlignment="Center"
                                     Icon="{TemplateBinding Icon}" 
                                     Fill="{TemplateBinding IconFill}" />
              </Viewbox>

              <!-- ButtonText -->
              <TextBlock Grid.Column="1" 
                        Text="{TemplateBinding ButtonText}" 
                         VerticalAlignment="Center"
                         Margin="5,0,0,0"
                         Foreground="{TemplateBinding Foreground}"
                         FontWeight="SemiBold"
                         TextTrimming="CharacterEllipsis"
                         TextWrapping="NoWrap"/>

              <!-- ContentPresenter -->
              <ContentPresenter Grid.Column="2"
                                Content="{TemplateBinding Content}" 
                                VerticalAlignment="Center"
                                Margin="5,0,0,0"/>
            </Grid>
          </Grid>

          <!-- 상태별 트리거 -->
          <ControlTemplate.Triggers>
            <!-- 마우스 오버 -->
            <Trigger Property="IsMouseOver" Value="True">
              <Setter TargetName="BaseRect" Property="Background" 
                      Value="{Binding MouseOverBackground, RelativeSource={RelativeSource TemplatedParent}}"/>
              <Setter TargetName="BaseRect" Property="BorderThickness" Value="0"/>
              <Setter TargetName="IconElement" Property="Fill"
                      Value="{Binding PressedBackground, RelativeSource={RelativeSource TemplatedParent}}"/>
            </Trigger>

            <!-- 클릭 상태 -->
            <Trigger Property="IsPressed" Value="True">
              <Setter TargetName="BaseRect" Property="Background" 
                      Value="{Binding PressedBackground, RelativeSource={RelativeSource TemplatedParent}}"/>
              <Setter TargetName="BaseRect" Property="BorderThickness" Value="0"/>
              <Setter TargetName="IconElement" Property="Fill" 
                      Value="{Binding MouseOverBackground, RelativeSource={RelativeSource TemplatedParent}}"/>
            </Trigger>

            <!-- 키보드 포커스 상태 -->
            <Trigger Property="IsKeyboardFocused" Value="True">
              <Setter TargetName="BaseRect" Property="BorderBrush" 
                      Value="{Binding KeyboardFocusBorderBrush, RelativeSource={RelativeSource TemplatedParent}}"/>
              <Setter TargetName="BaseRect" Property="BorderThickness" 
                      Value="{Binding KeyboardFocusBorderThickness, RelativeSource={RelativeSource TemplatedParent}}"/>
            </Trigger>

            <!-- 비활성화 상태 -->
            <Trigger Property="IsEnabled" Value="False">
              <Setter TargetName="BaseRect" Property="Background" Value="Gray"/>
              <Setter Property="Foreground" Value="LightGray"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>