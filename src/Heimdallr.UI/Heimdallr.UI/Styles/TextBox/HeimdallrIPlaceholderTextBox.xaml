<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ctrls="clr-namespace:Heimdallr.UI.Controls">

  <Style TargetType="{x:Type ctrls:HeimdallrPlaceholderTextBox}">
    <!-- 기본 속성 -->
    <Setter Property="Padding" Value="5" />
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="Foreground" Value="#000000" />
    <Setter Property="BorderBrush" Value="Transparent" />
    <Setter Property="MouseOverBorderBrush" Value="#FFE7F6F2" />
    <Setter Property="FocusedBorderBrush" Value="#FF27374D" />
    <Setter Property="CornerRadius" Value="7" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="Width" Value="200" />
    <Setter Property="Padding" Value="2" />
    <Setter Property="CaretBrush" Value="#FFFFFFFF" />
    <Setter Property="Height" Value="36" />
    <Setter Property="FontSize" Value="16" /> 
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ctrls:HeimdallrPlaceholderTextBox}">
          <Border x:Name="border"
                  CornerRadius="{TemplateBinding CornerRadius}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  Background="{TemplateBinding Background}"
                  SnapsToDevicePixels="True"
                  UseLayoutRounding="True">

            <Grid Margin="{TemplateBinding Padding}">
              <Grid.ColumnDefinitions>
                <!-- 이이콘 자리 -->
                <ColumnDefinition Width="Auto"/>

                <!-- 문자열 자리-->
                <ColumnDefinition Width="*"/>

                <!-- 우측버튼-->
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>

              <!-- 좌측 아이콘 -->
              <Viewbox Grid.Column="0"
                       Width="{TemplateBinding IconSize}"  
                       Height="{TemplateBinding IconSize}"  
                       Stretch="Uniform"
                       StretchDirection="Both"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Center">
                <ctrls:HeimdallrIcon Padding="2"
                                     Icon="{TemplateBinding Icon}"
                                     Fill="{TemplateBinding IconFill}" />
              </Viewbox>
              
              <!-- TextBox ContentHost -->
              <ScrollViewer x:Name="PART_ContentHost"
                            Grid.Column="1"
                            Margin="2 4 0 0"
                            Background="Transparent"/>

              <!-- Placeholder -->
              <TextBlock x:Name="PlaceholderTextBlock"
                         Grid.Column="1"
                         Margin="2 0 0 0"
                         VerticalAlignment="Center"
                         Foreground="{TemplateBinding PlaceholderForeground}"
                         Text="{TemplateBinding PlaceholderText}"
                         IsHitTestVisible="False"
                         TextTrimming="CharacterEllipsis"
                         Visibility="Collapsed">
                
                <TextBlock.RenderTransform>
                  <TranslateTransform />
                </TextBlock.RenderTransform>
              </TextBlock>

              <!-- 우측 아이콘 버튼 -->
              <Button x:Name="PART_RightButton"
                       Grid.Column="2"
                       Width="{TemplateBinding IconSize}"
                       Height="{TemplateBinding IconSize}"
                       Background="Transparent"
                       BorderThickness="0"
                       Command="{TemplateBinding RightCommand}"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Center">

                <Button.Style>
                  <Style TargetType="Button">
                    <Setter Property="Background" Value="Transparent" />
                    <Setter Property="OverridesDefaultStyle" Value="True" />
                    <Setter Property="Template">
                      <Setter.Value>
                        <ControlTemplate TargetType="Button">
                          <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </ControlTemplate>
                      </Setter.Value>
                    </Setter>
                    <Style.Triggers>
                      <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="Transparent" />
                      </Trigger>
                      <Trigger Property="IsPressed" Value="True">
                        <Setter Property="Background" Value="{Binding FocusedBorderBrush, RelativeSource={RelativeSource TemplatedParent}}" />
                      </Trigger>
                    </Style.Triggers>
                  </Style>
                </Button.Style>

                <Viewbox Width="{TemplateBinding RightIconSize}"  
                         Height="{TemplateBinding RightIconSize}" 
                         Stretch="Uniform"
                         StretchDirection="Both"
                         VerticalAlignment="Center"
                         HorizontalAlignment="Center">
                  <ctrls:HeimdallrIcon Padding="2"
                                       Icon="{TemplateBinding RightIcon}"
                                       Fill="{TemplateBinding RightIconFill}" 
                                       ToolTip="{TemplateBinding RightIconToolTip}"/>
                </Viewbox>
              </Button>
            </Grid>
          </Border>

          <ControlTemplate.Triggers>

            <!-- 오류 시 -->
            <Trigger Property="Validation.HasError" Value="True">
              <Setter TargetName="border" Property="BorderBrush" Value="#FFB00020"/>
            </Trigger>

            <!--#region 기본 Placeholder-->
            <Trigger Property="Text" Value="">
              <Setter TargetName="PlaceholderTextBlock" Property="Visibility" Value="Visible"/>
            </Trigger>
            <!--#endregion-->

            <!--#region Floating Label ON -->
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="UseFloatingLabel" Value="True"/>
                <Condition Property="IsKeyboardFocusWithin" Value="True"/>
              </MultiTrigger.Conditions>

              <Setter TargetName="PlaceholderTextBlock" Property="Visibility" Value="Visible"/>
              <Setter TargetName="PlaceholderTextBlock" Property="RenderTransform">
                <Setter.Value>
                  <TranslateTransform X="10" Y="-25"/>
                </Setter.Value>
              </Setter>
              <Setter TargetName="PlaceholderTextBlock" Property="FontSize" Value="11"/>
            </MultiTrigger>
            <!--#endregion-->
            
            <Trigger Property="Text" Value="">
              <Setter TargetName="PlaceholderTextBlock" Property="Visibility" Value="Visible"/>
            </Trigger>

            <Trigger Property="IsMouseOver" Value="True">
              <Setter TargetName="border" Property="BorderBrush"
                      Value="{Binding MouseOverBorderBrush, RelativeSource={RelativeSource TemplatedParent}}"/>
            </Trigger>

            <Trigger Property="IsKeyboardFocusWithin" Value="True">
              <Setter TargetName="border" Property="BorderBrush"
                    Value="{Binding FocusedBorderBrush, RelativeSource={RelativeSource TemplatedParent}}"/>
              <Setter TargetName="border" Property="BorderThickness" Value="0.5 0.5 0.5 3"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>
